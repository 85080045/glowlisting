# 🚀 Pholisting™ 运行指南

## 前置要求

确保您的系统已安装：
- **Node.js** 18 或更高版本
- **npm**（通常随 Node.js 一起安装）

### 检查是否已安装

在终端运行：
```bash
node --version
npm --version
```

如果没有安装，请访问 [nodejs.org](https://nodejs.org/) 下载安装。

---

## 📦 安装步骤

### 步骤 1: 安装前端依赖

在项目根目录运行：
```bash
cd /Users/masonding/Downloads/Pholisting
npm install
```

### 步骤 2: 安装后端依赖

```bash
cd server
npm install
cd ..
```

---

## 🎯 启动服务

**重要：需要同时运行前端和后端，请打开两个终端窗口！**

### 终端 1 - 启动前端（端口 3000）

在项目根目录运行：
```bash
npm run dev
```

看到以下信息表示启动成功：
```
  VITE v5.x.x  ready in xxx ms

  ➜  Local:   http://localhost:3000/
  ➜  Network: use --host to expose
```

### 终端 2 - 启动后端（端口 3001）

在项目根目录运行：
```bash
cd server
npm run dev
```

看到以下信息表示启动成功：
```
🚀 Pholisting™ API 服务器运行在 http://localhost:3001
📝 请配置环境变量 AUTOENHANCE_API_KEY 以使用真实的图片增强功能
```

---

## 🌐 访问应用

打开浏览器访问：**http://localhost:3000**

---

## ⚙️ 配置 API Key（可选）

如果您想使用真实的图片增强功能（而不是演示模式），需要：

1. **获取 API Key**
   - 访问 [autoenhance.ai](https://autoenhance.ai) 注册并获取 API key
   - 或其他图片增强服务的 API key

2. **创建配置文件**
   
   在 `server` 目录下创建 `.env` 文件：
   ```bash
   cd server
   touch .env
   ```
   
   编辑 `.env` 文件，添加：
   ```env
   AUTOENHANCE_API_KEY=your_api_key_here
   AUTOENHANCE_API_URL=https://api.autoenhance.ai/v1/enhance
   PORT=3001
   ```

3. **重启后端服务器**
   - 停止后端服务（Ctrl+C）
   - 重新运行 `npm run dev`

**注意：** 如果不配置 API key，系统会返回原始图片（仅用于演示功能流程）。

---

## 🐛 常见问题

### 问题 1: 端口被占用

**错误信息：** `Port 3000 is already in use`

**解决方法：**
- 修改 `vite.config.js` 中的端口号
- 或关闭占用端口的其他程序

### 问题 2: 找不到模块

**错误信息：** `Cannot find module 'xxx'`

**解决方法：**
```bash
# 重新安装依赖
rm -rf node_modules package-lock.json
npm install

# 后端也重新安装
cd server
rm -rf node_modules package-lock.json
npm install
```

### 问题 3: API 连接失败

**错误信息：** `Network Error` 或 `Failed to fetch`

**解决方法：**
1. 确保后端服务正在运行（检查终端 2）
2. 检查浏览器控制台是否有错误信息
3. 确认 `VITE_ENHANCE_API_URL` 环境变量是否正确

### 问题 4: 图片上传失败

**解决方法：**
- 确保图片大小不超过 10MB
- 确保图片格式为 JPG、PNG 等常见格式
- 检查浏览器控制台错误信息

---

## 📝 快速命令参考

```bash
# 安装所有依赖（前端+后端）
npm install && cd server && npm install && cd ..

# 启动前端（终端 1）
npm run dev

# 启动后端（终端 2）
cd server && npm run dev

# 构建生产版本
npm run build

# 预览生产版本
npm run preview
```

---

## 🎉 成功运行后

1. 打开 http://localhost:3000
2. 点击上传区域选择照片
3. 点击"开始 AI 增强"按钮
4. 等待处理完成
5. 下载增强后的照片

---

## 💡 提示

- 开发模式下，前端支持热重载（修改代码自动刷新）
- 后端使用 `--watch` 模式，修改代码会自动重启
- 建议使用 Chrome 或 Firefox 浏览器
- 首次运行可能需要一些时间安装依赖

---

如有问题，请查看 [README.md](./README.md) 获取更多信息。

